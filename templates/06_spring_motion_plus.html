{%  extends 'base.html' %}
{% block content %}
  <script>
    document.getElementById("prev-link").href="/05_parabolic_motion";
    document.getElementById("next-link").href="/07_rotation_motion";
    document.getElementById("desc-span").innerHTML="6/8";
  </script>

  <header id='overview'>
    <h1>시뮬레이션 6. 외력이 작용하는 용수철 운동</h1>
    <p class="headerDescription">
      외력이 작용하는 스프링 운동을 기술한다.
    </p>
  </header>
  <hr>
  <div id="engine-container">
    <div id="gui-container"></div>
    <canvas id="canvas" width="800px" height="600px"></canvas>
  </div>

  <script type="text/javascript" src="../static/js/npengine.dev.js"></script>
  <script type="text/javascript" src="../static/js/dat.gui.min.js"></script>
  <script type="text/javascript">
    var engine = new NPEngine(document.getElementById("canvas"));
    var grid = new NPEngine.Grid;
    var spring = new NPEngine.ForcedSpring;
    engine.setGrid(grid);
    engine.addDisplayObject(spring);
    engine.ready();

    // default value
    var DefaultValue = function () {
      this.mass = 2;
      this.k = 100;
      this.f0 = 20;
      this.ww0 = 0.5;
      this.phase = 3.141592;
      this.mu = 0;
      this.x = 0.1
    };

    window.onload = function () {
      var defaultValue = new DefaultValue();
      var gui = new dat.GUI();
      document.getElementById("gui-container").appendChild(gui.domElement);

      var massFolder = gui.addFolder('질량 (kg)');
      massFolder.open();
      var mass = massFolder.add(defaultValue, 'mass');
      mass.onChange(function (value) {
        engine.stop();
        spring.setMass(value);
        engine.ready();
      });

      var kFolder = gui.addFolder('k (N/m)');
      kFolder.open();
      var k = kFolder.add(defaultValue, 'k');
      k.onChange(function (value) {
        engine.stop();
        spring.setK(value);
        engine.ready();
      });

      var f0Folder = gui.addFolder('초기 힘 (N)');
      f0Folder.open();
      var f0 = f0Folder.add(defaultValue, 'f0');
      f0.onChange(function (value) {
        engine.stop();
        spring.setF0(value);
        engine.ready();
      });

      var ww0Folder = gui.addFolder('w / w0 ( - )');
      ww0Folder.open();
      var ww0 = ww0Folder.add(defaultValue, 'ww0');
      ww0.onChange(function (value) {
        engine.stop();
        spring.setWW0(value);
        engine.ready();
      });

      var phaseFolder = gui.addFolder('위상 ( - )');
      phaseFolder.open();
      var phase = phaseFolder.add(defaultValue, 'phase');
      phase.onChange(function (value) {
        engine.stop();
        spring.setPhase(value);
        engine.ready();
      });

      var muFolder = gui.addFolder('mu (N s/m)');
      muFolder.open();
      var mu = muFolder.add(defaultValue, 'mu');
      mu.onChange(function (value) {
        engine.stop();
        spring.setMu(value);
        engine.ready();
      });

      var xFolder = gui.addFolder('초기 위치 (m)');
      xFolder.open();
      var x = xFolder.add(defaultValue, 'x');
      x.onChange(function (value) {
        engine.stop();
        spring.setX(value);
        engine.ready();
      });
    }
  </script>
{% endblock %}
